# 前端-03总结 

9月27号，前端第三题大致是完成了。这一题让我真正地运用到了我这段时间所学习的知识，虽然答案仍然是有需要改进的地方，但我还是比较满意自己的成果的。

即使是一开始就浏览了所有题目，心里已经有底，但是当我正式面对第三题时，还是感到有点畏惧。看了题目描述，又去网上搜了搜几种to-do list的样式，在脑海里大概有了想法，主要就是实现两个功能：录入任务和deadline，以及deadline到时提醒用户。然后就着手写起代码来了。首先得录入to-do item吧，于是先写俩`<input type="text">`，一个写任务一个写时间，然后想添加一个`checkbox`来给已完成的任务做一个标记。标记之后不能只是给`checkbox`打个勾吧，文本框至少得来点变化，所以一开始想的是加删除线，但是后来灵感来了，就直接把一行的透明度都调低不就行了，于是给`checkbox`绑定了事件`change`，触发时就调透明度。接着，任务不应该只有一个吧，那就添加一个add按钮，绑定事件`on`，触发是就用`appened()`加一行字符串，这个字符串就跟第一行任务栏的html代码一样，于是实现了按add添加任务栏的功能。此后 ，我陷入了长时间的僵持——如何把`checkbox`调透明度的功能附加到添加的每一行任务栏上呢？最初的想法是用一个for函数，把每一行的`checkbox`部分提取出来然后绑定事件。然而我深知这段时间并没有熟练掌握循环语句的运用，对此方法产生了畏难情绪，便没有实施。于是决定另寻他路。后来便想，能不能给add绑定的函数代码里面再加几行，让每次add的时候就直接执行一次把要add的东西里边的`checkbox`绑定change事件的命令。于是就想到了之前一知半解的`this`。`this`在我的理解里就是一个代名词，指代调用他所在的函数的对象（防歧义：也就是说指代一个对象，这个对象调用了一个函数，这个函数里用了`this`）。但是这时候发现我用`appened()`使添加的是一行字符串，好像难以找到一个可以调用函数的对象，于是决定改变`apped()`添加的东西。回去查阅笔记，想起来还可以直接添加一个DOM，然后用`innnerHTML`改写内容就也可以实现增加任务栏，而且现在我就可以用添加的DOM调用一个含`this`的函数，然后在函数内部this就指代这个DOM，于是后边用选择器找到这个DOM里边的子节点就是很容易的事了。

可以说，这一个功能是消耗我时间的主力军，花了一整个下午，直到晚饭之后又花了一小时才整出来，不过就此以后我对接下来的功能如何实现也有了一点把握。

那么现在，当然是转向第二个功能——时间提醒。一样地，我决定先实现一行任务栏的功能，再把功能附加到用`add`添加的每一行任务栏上。幸运的是（不知道算不算偷懒），我在搜索html时间时，看到了一个组件，可以直接在页面上显示一个供用户选择时间，即`<input type="datetime-local">`。这个发现直接推翻了我之前对于时间格式的各种想法（如添加正则表达式或把一个文本输入框拆分成多个下拉选择框），让我毫不犹豫地就选择了他（其实就是懒）。我先在console界面看了下这个时间组件的返回值，就是`yyyy-mm-ddThh:mm`，摸清规律后就开始思考如何验证这个组件返回的时间是否和当前时间匹配。开始的想法就是提取时间组件返回值的子字符串，然后提取`Date()`返回值的子字符串，然后对比就行了 。不过还是嫌太麻烦，于是就想提取一个返回值的子字符串，然后把他重新排列成格式与另一个返回值相同的字符串然后对比就行了，简单来说就是提取两者其中之一的返回值的子字符串。后来又想到`Date()`的方法里边本来就有可以只获取当前年/月等的功能，那就更爽连字符串都不用提取了，直接把获取值排列成`yyyy-mm-ddThh:mm`的样子就好了。当然其中还有点小迂回就是`getHours()`等方法返回值如果小于10的话前边不带0，就加了几个if语句把他们加上了。完成了验证时间后，就没了吗？时间到了之后，当然要触发一个提醒功能啦。那就用if语句嘛，当那俩字符串相等时就触发alert。然而，if语句好像不能一直执行，这时懒得思考的我直接想到了暴力方法直接用`setInvertal`让这些函数隔一秒就执行一次。结果当然是成功了，只不过到了事件之后就会一直alert导致无法在页面上执行其他操作要一直点那个alert...不过无所谓，点一分钟就完了，直接进入下一步！

下一步就是给每一行的任务栏添加这个功能了。我本想着已经有了第一个功能的经验，我只要依葫芦画瓢就行了。但却发现这俩好像又有不同，第一个功能是通过add触发的，但这个功能好像并没有什么特别的触发的点。于是，我终于选择面对恐惧：用for语句。我用for语句把每个时间组件遍历一遍，然后每个都加上关于验证时间并提示的函数，过程居然还挺顺利，第一次感受到了for的用处。但是转念一想，如果我之后又add了几行任务栏，那是不是要再执行一遍这个东西。于是就把这个for语句也加到`setInterval`里边一秒执行一次了...

总的来说就是马马虎虎地把前端第三题完成了，当然我觉得要修复的东西还很多，比如我觉得一秒alert一次太反人类了我就改成闪烁了...当然还有其他的，以后慢慢改进哈。

---

好的招新最后一天了我差不多已经把答案改成了我想要的样子，把三个问题的答案拼到了一起，该有的功能基本都实现了，但是第三题给的notification api和缓存一直没弄出来，前者整了一下没整出来，不知道为什么我的浏览器显示不了通知，后者还没整...啊可能下午再努力一下吧。

------

好了到晚上缓存整出来了，说实话这部分代码是我写的最难受的部分了，还好整完了，给每一行任务栏储存区域编号是主要思路，用的是session storage，啊这前端招新到这差不多就结束了吧哈哈哈。感觉还是学到了很多，而且看到了更多需要我去学的东西。现在该补补数学和C语言了哈哈哈。